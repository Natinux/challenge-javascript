<header class="header">
  <h3 class="text-muted">Desafio Javascript</h3>
</header>

<section class="box-vehicle-form">
    <form action="#" id="vehicle-form">
        <section class="col-lg-4">
            <div class="form-group">
                <label for="registration-plate">Placa<span> *</span></label>
                <input type="text" class="form-control" id="registration-plate" placeholder="ABC-1234" ng-model="car.registrationPlate" required>
                <span class="error" ng-show="registrationPlateError">Campo obrigatório</span>

            </div>

            <div class="form-group">
                <label for="brand">Marca<span> *</span></label>
                <select class="form-control" id="brand" ng-model="car.brand" ng-options="brand.name  for brand in brands" ng-change="getCars()" required>
                    <option value="">Escolha uma marca</option>
                </select>
                <span class="error" ng-show="brandError">Campo obrigatório</span>
            </div>

            <div class="form-group">
                <label for="fuel">Combustível</label>
                <select class="form-control" id="fuel" ng-model="car.fuel" ng-options="fuel for fuel in fuels">
                    <option value="">Abastece com...</option>
                </select>
            </div>
        </section>

        <section class="col-lg-4 col-lg-offset-2">
            <div class="form-group">
                <label for="color">Cor</label>
                <select class="form-control" id="color" ng-model="car.color" >
                    <option value="">Escolha uma cor</option>
                    <option ng:repeat="color in colors" value="{{color}}">
                            {{ color }}
                    </option>
                </select>
            </div>

            <div class="form-group">
                <label for="model">Modelo<span> *</span></label>
                <select class="form-control" id="model" ng-model="car.model" ng-options="model for model in carsModels" ng-disabled="carsModels.length == 0" required>
                    <option value="">Escolha o modelo</option>
                    <option ng:repeat="model in brands" value="{{brand.name}}">
                            {{ brand.name }}
                    </option>
                </select>
                <span class="error" ng-show="modelError">Campo obrigatório</span>
            </div>

            <div class="form-group">
                <label for="image">Imagem</label>
                <input type="text" class="form-control" id="image" ng-model="car.image" placeholder="http://www.hondakaizen.com.br/img/logo.png">
            </div>
        </section>
        <div class=" col-lg-10 box-action">
            <div class="col-lg-3">
                <button type="button" class="btn btn-default btn-block" ng-click="cancel()">Cancelar</button>
            </div>
            <div class="col-lg-3 col-lg-offset-6">
                <button type="button" class="btn btn-primary btn-block" ng-click="add()" ng-show="!editBtn">Adicionar</button>
                <button type="button" class="btn btn-success btn-block" ng-show="editBtn">Salvar</button>
            </div>
        </div>
    </form>
</section>

<section class="col-lg-10">
    <div class="col-lg-12">
        <h3>Buscar:</h3>
        <div class="form-group col-lg-4">
            <label>Marca</label>
            <input class="form-control" type="text" ng-model="search.brand">
        </div>

        <div class="form-group col-lg-4">
            <label>Cor</label>
            <input class="form-control" type="text" ng-model="search.color">
        </div>
    </div>

    <div class="col-lg-12">
    <!-- <ul>
        <li ng-repeat="car in cars">{{car.model}}</li>
    </ul> -->
        <table id="results" class="table table-striped table-bordered table-hover">
            <thead>
            <tr>
                <th>Foto</th>
                <th>Placa</th>
                <th>Marca</th>
                <th>Modelo</th>
                <th>Combustível</th>
                <th>Cor</th>
                <th>Ação</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="car in cars | filter:{brand: search.brand, color: search.color} | startFrom:currentPage*pageSize | limitTo:pageSize">
                <td id="image"> <img src="{{car.image | thumb:{image:car.image, brand:car.brand}  }}" height="20" width="30"></td>
                <td id="registrationPlate">{{car.registrationPlate}}</td>
                <td id="brand">{{car.brand}}</td>
                <td id="model">{{car.model}}</td>
                <td id="fuel">{{car.fuel}}</td>
                <td id="color">{{car.color}}</td>
                <td>
                    <a ng-click="editCar($index)" class="edit-car">Editar</a>
                    <a ng-click="deleteCar($index)">Excluir</a>

                </td>
            </tr>
            </tbody>
        </table>
        <button ng-disabled="currentPage == 0" ng-click="currentPage=currentPage-1">
            Anterior
        </button>
        {{currentPage+1}}/{{numberOfPages()}}
        <button ng-disabled="currentPage >= cars.length/pageSize - 1" ng-click="currentPage=currentPage+1">
            Próxima
        </button>
    </div>
</section>
